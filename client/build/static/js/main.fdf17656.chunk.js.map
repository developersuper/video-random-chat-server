{"version":3,"sources":["reducers/auth.js","reducers/message.js","reducers/index.js","actions/types.js","store.js","services/auth.service.js","actions/auth.js","components/login.js","services/upload.service.js","components/register.js","communicate/socket.js","communicate/Emitter.js","communicate/MediaDevice.js","communicate/PeerConnection.js","components/filter_menu.js","services/report.js","components/report_menu.js","components/main_navbar.js","components/video_panel.js","components/msg.js","components/msg_input.js","components/msg_box.js","components/clietn_profile.js","components/view_img.js","components/loading.js","components/profile.js","components/main.js","services/ban.js","components/user_tab.js","components/admin.js","protected_route.js","helpers/history.js","App.js","actions/message.js","serviceWorker.js","index.js"],"names":["initialState","isLoggedIn","user","combineReducers","auth","state","action","type","payload","message","middleware","thunk","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","API_URL","process","login","a","axios","post","response","data","logout","localStorage","removeItem","console","log","headers","token","register","authenticate","sucess","getFriendInfo","id","update","getAll","get","success","error","dispatch","AuthService","setItem","JSON","stringify","required","value","className","role","Login","props","onChangeUsername","e","setState","username","target","onChangePassword","password","handleLogin","preventDefault","loading","form","validateAll","history","checkBtn","context","_errors","length","push","this","to","style","backgroundColor","src","alt","onSubmit","ref","c","color","paddingRight","name","onChange","border","borderBottom","validations","disabled","display","textAlign","href","Component","connect","file","formData","FormData","append","then","res","path","catch","err","Register","onChangeAge","age","onChangeGender","gender","onChangeLocation","location","onChangeAboutMe","aboutMe","handleRegister","successful","UploadService","uploadAvatar","avatar","window","reload","handleClick","event","hiddenFileInput","current","click","handleChange","fileUploaded","files","readURL","reader","FileReader","onload","avatarSrc","result","readAsDataURL","React","createRef","locationOptions","countryList","getData","map","item","idx","key","label","onClick","autoComplete","width","min","max","maxWidth","row","socket","io","Emitter","events","args","forEach","fn","_","isFunction","listeners","index","findIndex","_fn","splice","MediaDevice","navigator","mediaDevices","getUserMedia","video","facingMode","height","ideal","audio","stream","emit","DOMException","alert","on","len","arguments","track","enabled","set","getTracks","stop","PC_CONFIG","iceServers","urls","PeerConnection","friendID","pc","RTCPeerConnection","onicecandidate","candidate","ontrack","streams","mediaDevice","isCaller","config","addTrack","createOffer","start","isStarter","close","off","getDescription","bind","createAnswer","desc","setLocalDescription","sdp","rtcSdp","RTCSessionDescription","setRemoteDescription","iceCandidate","RTCIceCandidate","addIceCandidate","FilterMenu","handleLocation","currentTarget","handleAge","ageMin","ageMax","handleGender","checked","submitFilter","male","female","toggle","overflowY","padding","Slider","valueLabelDisplay","aria-labelledby","FormControlLabel","control","Checkbox","labelPlacement","ReportService","sendReport","report","ReportMenu","handleUsername","isMt","friendInfo","handleDescription","description","submitReport","msg","from","myId","Input","placeholder","inputProps","NabBar","logOut","endCall","skip","filter","fontSize","_id","float","toggleProfile","margin","VideoPanel","peerSrc","localSrc","peerVideo","status","useRef","localVideo","useState","setVideo","setAudio","useEffect","srcObject","toggleMediaDevice","deviceType","autoPlay","alignItems","muted","Msg","LeftMsg","text","time","RightMsg","LeftFileMsg","viewImage","download","RightFileMsg","MsgInput","onEmojiClick","emoji","native","sendTyping","lastUpdateTime","Date","now","isTyping","friendId","startCheckingTyping","typingInterval","setInterval","stopCheckingTyping","clearInterval","sendMsg","uploadImage","fileSrc","getMsg","emojiBox","handleText","ext","split","pop","toLowerCase","handleCloseFileupload","handleEmojiBox","visibility","onSelect","friendTyping","onKeyUp","keyCode","MsgBox","scrollDown","container","refs","scrollTop","scrollHeight","resetChat","chats","mtFlag","getTime","date","getHours","getMinutes","slice","renderMsg","prevProps","prevState","ClientProfile","info","backgroundImage","ViewImg","Loading","Profile","handleUpdate","Main","getFriend","friend","startCall","newState","clientProfileFlag","viewImg","toggleFriendFlag","profile","clientId","document","title","setTimeout","disconnect","isEmpty","clientInfo","BanService","create","ip","delete","createAccount","deleteAccount","columns","field","headerName","UserTab","rows","pageSize","checkboxSelection","AdminBoard","init","authService","users","banService","bans","reportService","reports","newValue","AppBar","position","Tabs","variant","aria-label","LinkTab","a11yProps","TabPanel","children","other","hidden","Box","p","Tab","component","makeStyles","theme","root","flexGrow","palette","background","paper","ProtectedRoute","createBrowserHistory","App","currentUser","undefined","listen","exact","Boolean","hostname","match","ReactDOM","render","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.fdf17656.chunk.js","sourcesContent":["import {\n  REGISTER_SUCCESS,\n  REGISTER_FAIL,\n  LOGIN_SUCCESS,\n  LOGIN_FAIL,\n  LOGOUT,\n  UPDATE_FAIL,\n  UPDATE_SUCCESS,\n} from \"../actions/types\";\n\n// const user = JSON.parse(localStorage.getItem(\"user\"));\nconst user = null;\nconst initialState = user\n  ? { isLoggedIn: true, user }\n  : { isLoggedIn: false, user: null };\n\nexport default function (state = initialState, action) {\n  const { type, payload } = action;\n\n  switch (type) {\n    case REGISTER_SUCCESS:\n      return {\n        ...state,\n        isLoggedIn: false,\n      };\n    case REGISTER_FAIL:\n      return {\n        ...state,\n        isLoggedIn: false,\n      };\n    case LOGIN_SUCCESS:\n      return {\n        ...state,\n        isLoggedIn: true,\n        user: payload.user,\n      };\n    case LOGIN_FAIL:\n      return {\n        ...state,\n        isLoggedIn: false,\n        user: null,\n      };\n    case LOGOUT:\n      return {\n        ...state,\n        isLoggedIn: false,\n        // user: null,\n      };\n      case UPDATE_SUCCESS:\n        return {\n          ...state,\n          isLoggedIn: true,\n          user: payload.user,\n        };\n      case UPDATE_FAIL:\n        return {\n          ...state,\n          isLoggedIn: false,\n        };      \n    default:\n      return state;\n  }\n}\n","import { SET_MESSAGE, CLEAR_MESSAGE } from \"../actions/types\";\n\nconst initialState = {};\n\nexport default function (state = initialState, action) {\n  const { type, payload } = action;\n\n  switch (type) {\n    case SET_MESSAGE:\n      return { message: payload };\n\n    case CLEAR_MESSAGE:\n      return { message: \"\" };\n\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from \"redux\";\nimport auth from \"./auth\";\nimport message from \"./message\";\n\nexport default combineReducers({\n  auth,\n  message,\n});\n","export const REGISTER_SUCCESS = \"REGISTER_SUCCESS\";\nexport const REGISTER_FAIL = \"REGISTER_FAIL\";\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\nexport const LOGIN_FAIL = \"LOGIN_FAIL\";\nexport const LOGOUT = \"LOGOUT\";\n\nexport const SET_MESSAGE = \"SET_MESSAGE\";\nexport const CLEAR_MESSAGE = \"CLEAR_MESSAGE\";\n\nexport const UPDATE_SUCCESS = \"UPDATE_USER\";\nexport const UPDATE_FAIL = \"UPDATE_FAIL\";","import { createStore, applyMiddleware } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport thunk from \"redux-thunk\";\nimport rootReducer from \"./reducers\";\n\nconst middleware = [thunk];\n\nconst store = createStore(\n  rootReducer,\n  composeWithDevTools(applyMiddleware(...middleware))\n);\n\nexport default store;\n","import axios from \"axios\";\n\nconst API_URL = process.env.REACT_APP_API_URL+`/user`;\n\nclass AuthService {\n  login = async (user) => {\n    var response = await axios.post(API_URL+'/login', user);\n    return response.data;\n  }\n\n  logout = async (user) => {\n    localStorage.removeItem(\"user\");\n    console.log('log out..');\n    if(user) axios\n      .post(API_URL+'/logout', {}, {headers: {token: user.token} } );\n  }\n\n  register = async (user) => {\n    var response = await axios.post(API_URL, user);\n    return response.data;\n  }\n\n  authenticate = async (token) => {\n    var response = await axios.post(API_URL + '/authenticate', {}, {headers: {token}});\n    if(response.data.sucess === 'true') return true;\n    else return false;\n  }\n  getFriendInfo = async (id, token) => {\n    var response = await axios.post(API_URL + '/getAUser', {id}, {headers: {token}});\n    return response.data;\n  }\n  update = async (user, token) => {\n    var response = await axios.post(API_URL + '/update', {user}, {headers: {token}});\n    return response.data;\n  }\n  getAll = async (token) => {\n    try{\n      var response = await axios.get(API_URL + '/getAll', {headers: {token}});\n      return response.data;\n    }catch(err){\n      console.log(err);\n      return {success: false, error: \"some errors occured in client side\"};\n    }\n  }\n}\n\nexport default new AuthService();\n","import {\n  REGISTER_SUCCESS,\n  REGISTER_FAIL,\n  LOGIN_SUCCESS,\n  LOGIN_FAIL,\n  LOGOUT,\n  SET_MESSAGE,\n  UPDATE_FAIL,\n  UPDATE_SUCCESS,\n} from \"./types\";\n\nimport AuthService from \"../services/auth.service\";\n\nexport const register = (user) => async (dispatch) => {\n  var response = await AuthService.register(user);\n  if(response.success === true){\n      console.log(response)\n      dispatch({\n        type: REGISTER_SUCCESS,\n      })\n      dispatch({\n        type: SET_MESSAGE,\n        payload: response.message,\n      })\n      return response;\n  }else{\n      dispatch({\n        type: REGISTER_FAIL,\n      });\n      dispatch({\n        type: SET_MESSAGE,\n        payload: response.message || response.error,\n      });\n      return response;\n    }\n}\n\nexport const login = (user) => async (dispatch) => {\n  var response = await AuthService.login(user);\n  if(response.success === false){\n      dispatch({\n        type: LOGIN_FAIL,\n      });\n      dispatch({\n        type: SET_MESSAGE,\n        payload: response.message || response.error,\n      });\n  }\n  if(response.success === true){\n    if (response.token) {\n      localStorage.setItem(\"user\", JSON.stringify(response));\n    }\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: { user: response },\n    });   \n  }\n  return response;\n};\n\nexport const logout = (user) => (dispatch) => {\n  // AuthService.logout(user);\n  dispatch({\n    type: LOGOUT,\n  });\n};\n\nexport const update = (user, token) => async (dispatch) => {\n  var response = await AuthService.update(user, token);\n  if(response.success === false){\n      dispatch({\n        type: UPDATE_FAIL,\n      });\n      dispatch({\n        type: SET_MESSAGE,\n        payload: response.message || response.error,\n      });\n  }\n  if(response.success === true){\n    if (response.token) {\n      localStorage.setItem(\"user\", JSON.stringify(response));\n    }\n    dispatch({\n      type: UPDATE_SUCCESS,\n      payload: { user: response },\n    });   \n  }\n  return response;\n};","import React, { Component } from \"react\";\nimport { Redirect } from 'react-router-dom';\n\nimport Form from \"react-validation/build/form\";\nimport CheckButton from \"react-validation/build/button\";\n\nimport { connect } from \"react-redux\";\nimport { login } from \"../actions/auth\";\n\nconst required = (value) => {\n  if (!value) {\n    return (\n      <div className=\"alert alert-danger\" role=\"alert\">\n        This field is required!\n      </div>\n    );\n  }\n};\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\",\n      loading: false,\n    };\n  }\n\n  onChangeUsername = (e) => {\n    this.setState({\n      username: e.target.value,\n    });\n  }\n\n  onChangePassword = (e) => {\n    this.setState({\n      password: e.target.value,\n    });\n  }\n\n  handleLogin = async (e) => {\n    e.preventDefault();\n\n    this.setState({\n      loading: true,\n    });\n\n    this.form.validateAll();\n\n    const { dispatch, history } = this.props;\n    const {username, password} = this.state;\n    console.log(\"login state...\", this.state);\n    if (this.checkBtn.context._errors.length === 0) {\n      var user = await dispatch( login({username, password}) );\n      if(user.success === true) {\n        history.push(\"/main\");\n      }else {\n        this.setState({\n          loading: false\n        });\n      };\n    }else {\n        this.setState({\n          loading: false,\n        });\n    }\n  }\n\n  render() {\n    const { isLoggedIn, message } = this.props;\n    if (isLoggedIn) {\n      return <Redirect to=\"/main\" />;\n    }\n    return (\n      <div className=\"col-md-12\">\n        <div className=\"card card-container shadow-lg\" style={{backgroundColor:\"white\"}}>\n          <img\n            src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\n            alt=\"profile-img\"\n            className=\"profile-img-card\"\n          />\n          <Form\n            onSubmit={this.handleLogin}\n            ref={(c) => {\n              this.form = c;\n            }}\n          >\n            <div className=\"d-flex pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Username: </div>\n                    <input\n                      type=\"text\"\n                      name=\"username\"\n                      className=\"app-info-input\"\n                      value={this.state.username}\n                      onChange={this.onChangeUsername}\n                      style={{ border:'none', borderBottom: \"solid 2px #eee\"}}\n                    />\n                </div>\n\n            <div className=\"d-flex pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Password: </div>\n                  <input\n                    type=\"password\"\n                    name=\"password\"\n                    className=\"app-info-input\"\n                    value={this.state.password}\n                    onChange={this.onChangePassword}\n                    validations={[required]}\n                    style={{ border:'none', borderBottom: \"solid 2px #eee\"}}\n                  />\n                </div>\n\n            <div className=\"form-group pt-3\">\n              <button\n                className=\"btn btn-primary btn-block\"\n                style={{backgroundColor: 'slateblue', border: \"none\"}}\n                disabled={this.state.loading}\n              >\n                {this.state.loading && (\n                  <span className=\"spinner-border spinner-border-sm\"></span>\n                )}\n                <span>Login</span>\n              </button>\n            </div>\n\n            {message && (\n              <div className=\"form-group\">\n                <div className=\"alert alert-danger\" role=\"alert\">\n                  {message}\n                </div>\n              </div>\n            )}\n            <CheckButton\n              style={{ display: \"none\" }}\n              ref={(c) => {\n                this.checkBtn = c;\n              }}\n            />\n          </Form>\n          <div style={{textAlign: 'center'}}>\n            Not a member?<a href=\"/register\" style={{color: 'slateblue', display: 'block'}}>Sign up now</a>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  const { isLoggedIn } = state.auth;\n  const { message } = state.message;\n  return {\n    isLoggedIn,\n    message\n  };\n}\n\nexport default connect(mapStateToProps)(Login);\n","import axios from 'axios';\r\n\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL + '/upload';\r\n\r\nclass UploadService {\r\n  uploadAvatar(file) {\r\n    const formData = new FormData();\r\n    formData.append('file', file); // appending file\r\n    return axios.post(API_URL + '/avatar', formData).then(res => {\r\n        console.log(res);\r\n        if(res.data.success === \"true\") return res.data.path;\r\n        return null;\r\n    }).catch(err => {\r\n        console.log(err);\r\n        return null;\r\n    });\r\n  }\r\n  uploadImage(file) {\r\n    const formData = new FormData();\r\n    formData.append('file', file); // appending file\r\n    return axios.post(API_URL + '/image', formData).then(res => {\r\n        console.log(res);\r\n        if(res.data.success === \"true\") return res.data.path;\r\n        return null;\r\n    }).catch(err => {\r\n        console.log(err);\r\n        return null;\r\n    });\r\n  }\r\n}\r\n\r\nexport default new UploadService();\r\n","import React, { Component } from \"react\";\nimport Form from \"react-validation/build/form\";\nimport CheckButton from \"react-validation/build/button\";\nimport UploadService from '../services/upload.service';\nimport countryList from 'react-select-country-list';\nimport { connect } from \"react-redux\";\nimport { register } from \"../actions/auth\";\n\nclass Register extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\",\n      age: 0,\n      gender: 'Male',\n      location: '',\n      aboutMe: '',\n      file: null,\n      avatarSrc: null,\n      successful: false,\n    };\n    this.hiddenFileInput = React.createRef();\n    this.locationOptions = countryList().getData().map((item, idx) => {\n      return <option key={idx}>{item.label}</option>;\n    });\n  }\n\n  onChangeUsername = (e) => {\n    this.setState({\n      username: e.target.value,\n    });\n  }\n  onChangeAge = (e) => {\n    this.setState({\n      age: e.target.value,\n    });\n  }\n  onChangeGender = (e) => {\n    this.setState({\n      gender: e.target.value,\n    });\n  }\n  onChangeLocation = (e) => {\n    this.setState({\n      location: e.target.value,\n    });\n  }\n  onChangeAboutMe = (e) => {\n    this.setState({\n      aboutMe: e.target.value,\n    });\n  }\n  onChangePassword = (e) => {\n    this.setState({\n      password: e.target.value,\n    });\n  }\n\n  handleRegister = async (e) => {\n    e.preventDefault();\n\n    this.setState({\n      successful: false,\n    });\n\n    this.form.validateAll();\n    const {file, username, age, gender, location, password, aboutMe} = this.state;\n    let avatar;\n    if (this.checkBtn.context._errors.length === 0) {\n      if(file){\n        avatar = await UploadService.uploadAvatar(file);\n      }\n      var response = await this.props.dispatch( register({ username, age, gender, location, password, aboutMe, avatar }) );\n      if(response.success === true){\n          this.setState({\n            successful: true,\n          });\n          this.props.history.push(\"/login\");\n          window.location.reload();\n        }else {\n          this.setState({\n            successful: false,\n          });\n        }\n    }\n  }\n  handleClick = async event => {\n    await this.hiddenFileInput.current.click();\n  };\n  handleChange = async event => {\n    const fileUploaded = event.target.files[0];\n    if(fileUploaded){\n        console.log(fileUploaded);\n        await this.readURL(fileUploaded);\n        await this.setState({file: fileUploaded});\n    }\n  }\n  readURL = async (file) => {\n    if (file) {\n        var reader = new FileReader();\n\n        reader.onload = async (e) => {\n          await this.setState({avatarSrc: e.target.result});\n        };\n\n        reader.readAsDataURL(file);\n    }\n  }\n  render() {\n    const { message } = this.props;\n    const {file, avatarSrc} = this.state;\n    return (\n      <div className=\"col-md-12\">\n        <div className=\"card card-container shadow-lg\" style={{backgroundColor:\"white\"}}>\n          <input type=\"file\"\n                ref={this.hiddenFileInput}\n                onChange={this.handleChange}\n                style={{display:'none'}} \n          /> \n          <img\n            src={file ? avatarSrc : \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"}\n            alt=\"profile-img\"\n            className=\"profile-img-card\"\n            onClick={this.handleClick}\n          />\n\n          <Form\n            onSubmit={this.handleRegister}\n            ref={(c) => {\n              this.form = c;\n            }}\n          >\n            {!this.state.successful && (\n              <div>\n                <div className=\"d-flex pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Username: </div>\n                  <input\n                    type=\"text\"\n                    name=\"username\"\n                    className=\"app-info-input\"\n                    autoComplete=\"off\"\n                    value={this.state.username}\n                    onChange={this.onChangeUsername}\n                    style={{ border:'none', borderBottom: \"solid 2px #eee\"}}\n                    required\n                  />\n                </div>\n                <div className=\"d-flex pt-3 justify-content-between form-group\">\n                  <div className=\"d-flex form-group\">\n                    <div style={{color: '#ccc', paddingRight: '6px'}}>gender: </div>\n                    <select \n                      style={{ border:'none', borderBottom: \"solid 2px #eee\"}}\n                      value={this.state.gender}\n                      onChange={this.onChangeGender}\n                      required\n                    >\n                      <option>Male</option>\n                      <option>Female</option>\n                      <option>orther</option>\n                    </select>\n                  </div>\n                  <div className=\"d-flex form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Age: </div>\n                  <input\n                        type=\"number\"\n                        name=\"username\"\n                        value={this.state.age}\n                        autoComplete=\"off\"\n                        onChange={this.onChangeAge}\n                        style={{ border:'none', borderBottom: \"solid 2px #eee\", width: \"50px\"}}\n                        min='13'\n                        max='99'\n                        required\n                  />\n                  </div>\n                </div>\n                <div className=\"d-flex pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Location: </div>\n                  <select \n                      style={{ border:'none', borderBottom: \"solid 2px #eee\", maxWidth: \"178px\"}}\n                      value={this.state.location}\n                      onChange={this.onChangeLocation}\n                      required\n                    >\n                      {\n                        this.locationOptions\n                      }\n                    </select>\n                </div>\n                <div className=\"d-flex pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Password: </div>\n                  <input\n                    type=\"password\"\n                    name=\"password\"\n                    className=\"app-info-input\"\n                    value={this.state.password}\n                    onChange={this.onChangePassword}\n                    style={{ border:'none', borderBottom: \"solid 2px #eee\"}}\n                    required\n                  />\n                </div>\n                <div className=\"pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>About me: </div>\n                  <textarea\n                    row=\"3\"\n                    value={this.state.aboutMe}\n                    onChange={this.onChangeAboutMe}\n                    // validations={[required, vpassword]}\n                    style={{ border:'none', borderBottom: \"solid 2px #eee\", width: \"100%\"}}\n                  />\n                </div>\n                <div className=\"form-group pt-3\">\n                  <button className=\"btn btn-primary btn-block\" style={{backgroundColor: 'slateblue', border: \"none\"}}>Sign Up</button>\n                </div>\n              </div>\n            )}\n\n            {message && (\n              <div className=\"form-group\">\n                <div className={ this.state.successful ? \"alert alert-success\" : \"alert alert-danger\" } role=\"alert\">\n                  {message}\n                </div>\n              </div>\n            )}\n            <CheckButton\n              style={{ display: \"none\" }}\n              ref={(c) => {\n                this.checkBtn = c;\n              }}\n            />\n          </Form>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  const { message } = state.message;\n  return {\n    message,\n  };\n}\n\nexport default connect(mapStateToProps)(Register);\n","import io from 'socket.io-client';\nconst ENDPOINT = process.env.REACT_APP_SOCK;\nconst socket = io(ENDPOINT);\n\nexport default socket;\n","import _ from 'lodash';\n\nclass Emitter {\n  constructor() {\n    this.events = {};\n  }\n\n  emit(event, ...args) {\n    if (this.events[event]) {\n      this.events[event].forEach((fn) => fn(...args));\n    }\n    return this;\n  }\n\n  on(event, fn) {\n    if (this.events[event]) this.events[event].push(fn);\n    else this.events[event] = [fn];\n    return this;\n  }\n\n  off(event, fn) {\n    if (event && _.isFunction(fn)) {\n      const listeners = this.events[event];\n      const index = listeners.findIndex((_fn) => _fn === fn);\n      listeners.splice(index, 1);\n    } else this.events[event] = [];\n    return this;\n  }\n}\n\nexport default Emitter;\n","import _ from 'lodash';\nimport Emitter from './Emitter';\n\n/**\n * Manage all media devices\n */\nclass MediaDevice extends Emitter {\n  /**\n   * Start media devices and send stream\n   */\n  start() {\n    const constraints = {\n      video: {\n        facingMode: 'user',\n        height: { min: 360, ideal: 720, max: 1080 }\n      },\n      audio: true\n    };\n    navigator.mediaDevices\n      .getUserMedia(constraints)\n      .then((stream) => {\n        this.stream = stream;\n        this.emit('stream', stream);\n      })\n      .catch((err) => {\n        if (err instanceof DOMException) {\n          alert('Cannot open webcam and/or microphone');\n        } else {\n          console.log(\"here..................\",err);\n        }\n      });\n\n    return this;\n  }\n\n  /**\n   * Turn on/off a device\n   * @param {String} type - Type of the device\n   * @param {Boolean} [on] - State of the device\n   */\n  toggle(type, on) {\n    const len = arguments.length;\n    if (this.stream) {\n      this.stream[`get${type}Tracks`]().forEach((track) => {\n        const state = len === 2 ? on : !track.enabled;\n        _.set(track, 'enabled', state);\n      });\n    }\n    return this;\n  }\n\n  /**\n   * Stop all media track of devices\n   */\n  stop() {\n    if (this.stream) {\n      this.stream.getTracks().forEach((track) => track.stop());\n    }\n    return this;\n  }\n}\n\nexport default MediaDevice;\n","import MediaDevice from './MediaDevice';\nimport Emitter from './Emitter';\nimport socket from './socket';\n\nconst PC_CONFIG = { iceServers: [{ urls: ['stun:stun.l.google.com:19302'] }] };\n\nclass PeerConnection extends Emitter {\n  /**\n     * Create a PeerConnection.\n     * @param {String} friendID - ID of the friend you want to call.\n     */\n  constructor(friendID) {\n    super();\n    this.pc = new RTCPeerConnection(PC_CONFIG);\n    this.pc.onicecandidate = (event) => socket.emit('call', {\n      to: this.friendID,\n      candidate: event.candidate\n    });\n    this.pc.ontrack = (event) => this.emit('peerStream', event.streams[0]);\n\n    this.mediaDevice = new MediaDevice();\n    this.friendID = friendID;\n  }\n\n  /**\n   * Starting the call\n   * @param {Boolean} isCaller\n   * @param {Object} config - configuration for the call {audio: boolean, video: boolean}\n   */\n  start(isCaller, config) {\n    this.mediaDevice\n      .on('stream', (stream) => {\n        stream.getTracks().forEach((track) => {\n          this.pc.addTrack(track, stream);\n        });\n        this.emit('localStream', stream);\n        if (isCaller) {\n          socket.emit('request', { to: this.friendID });\n        }\n        else this.createOffer();\n      })\n      .start(config);\n\n    return this;\n  }\n\n  /**\n   * Stop the call\n   * @param {Boolean} isStarter\n   */\n  stop(isStarter) {\n    if (isStarter) {\n      socket.emit('end', { to: this.friendID });\n    }\n    this.mediaDevice.stop();\n    this.pc.close();\n    this.pc = null;\n    this.off();\n    return this;\n  }\n\n  createOffer() {\n    this.pc.createOffer()\n      .then(this.getDescription.bind(this))\n      .catch((err) => console.log(err));\n    return this;\n  }\n\n  createAnswer() {\n    this.pc.createAnswer()\n      .then(this.getDescription.bind(this))\n      .catch((err) => console.log(err));\n    return this;\n  }\n\n  getDescription(desc) {\n    this.pc.setLocalDescription(desc);\n    socket.emit('call', { to: this.friendID, sdp: desc });\n    return this;\n  }\n\n  /**\n   * @param {Object} sdp - Session description\n   */\n  setRemoteDescription(sdp) {\n    const rtcSdp = new RTCSessionDescription(sdp);\n    this.pc.setRemoteDescription(rtcSdp);\n    return this;\n  }\n\n  /**\n   * @param {Object} candidate - ICE Candidate\n   */\n  addIceCandidate(candidate) {\n    if (candidate) {\n      const iceCandidate = new RTCIceCandidate(candidate);\n      this.pc.addIceCandidate(iceCandidate);\n    }\n    return this;\n  }\n}\n\nexport default PeerConnection;\n","\r\nimport React, { Component } from \"react\";\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport countryList from 'react-select-country-list';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport socket from '../communicate/socket';\r\n\r\nclass FilterMenu extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n          ageMin: 1,\r\n          ageMax: 100,\r\n          location: '',\r\n          male:true,\r\n          female:true,\r\n        }\r\n        this.locationOptions = countryList().getData().map((item, idx) => {\r\n          return <option key={idx}>{item.label}</option>;\r\n        });\r\n    }\r\n    handleLocation = (e) => {\r\n      this.setState({ location: e.currentTarget.value});\r\n    }\r\n    handleAge = (event, value) => {\r\n      this.setState({\r\n        ageMin: value[0],\r\n        ageMax: value[1]\r\n      });\r\n    };\r\n    handleGender = (event) => {\r\n      let target = event.currentTarget;\r\n      this.setState({\r\n        [target.value]: target.checked\r\n      });\r\n    }\r\n    submitFilter = async () => {\r\n      const {ageMin, ageMax, male, female, location} = this.state;\r\n      let gender = 'all';\r\n      if(male && !female) gender = 'Male';\r\n      else if(!male && female) gender = 'Female';\r\n      socket.emit('filter', {ageMin, ageMax, location, gender}); \r\n      await this.props.toggle();\r\n    }\r\n    render() {\r\n      const {ageMin, ageMax} = this.state;\r\n      return (\r\n        <div className=\"hide-overflow\" style={{ overflowY: 'auto', padding: '15px'}}>\r\n          <div className='d-flex align-items-center justify-content-between' style={{borderBottom: '2px solid grey'}}>\r\n            <div className=\"d-flex\"><i className=\"fa fa-search\" style={{paddingRight: '5px', color: 'black'}}></i><h4 >Filter</h4></div>\r\n            <i className=\"fas fa-times my-cursor\" onClick={this.props.toggle}></i>\r\n          </div>\r\n          <div style={{padding: '1vw'}}>\r\n          <div className=\"d-flex pt-3 form-group\">\r\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Location: </div>\r\n                  <select \r\n                      style={{ border:'none', borderBottom: \"solid 2px #eee\", maxWidth: \"178px\", backgroundColor: '#fafafa'}}\r\n                      value={this.state.location}\r\n                      onChange={this.handleLocation}\r\n                      required\r\n                    >\r\n                      {\r\n                        this.locationOptions\r\n                      }\r\n                    </select>\r\n                </div>\r\n            <div className=\"d-flex pt-3 form-group\">\r\n                    <div style={{color: '#ccc', paddingRight: '6px'}}>Age Range: </div>\r\n                    <Slider\r\n                      min={13}\r\n                      max={99}\r\n                      value={[ageMin, ageMax]}\r\n                      onChange={this.handleAge}\r\n                      valueLabelDisplay=\"auto\"\r\n                      aria-labelledby=\"range-slider\"\r\n                    />\r\n            </div>\r\n            <div className=\"d-flex pt-3 form-group align-items-center\">\r\n                    <div style={{color: '#ccc', paddingRight: '6px'}}>Gender: </div>\r\n                    <FormControlLabel\r\n                      value=\"male\"\r\n                      control={<Checkbox color=\"primary\" />}\r\n                      label=\"Male\"\r\n                      labelPlacement=\"end\"\r\n                      checked={this.state.male}\r\n                      onChange={this.handleGender}\r\n                    />\r\n                    <FormControlLabel\r\n                      value=\"female\"\r\n                      control={<Checkbox color=\"primary\" />}\r\n                      label=\"Female\"\r\n                      labelPlacement=\"end\"\r\n                      checked={this.state.female}\r\n                      onChange={this.handleGender}\r\n                    />\r\n            </div>\r\n          </div>\r\n          <div className=\"form-group pt-3\">\r\n            <button className=\"btn btn-primary btn-block\" onClick={this.submitFilter} style={{backgroundColor: 'slateblue', border: \"none\"}}>Apply</button>\r\n          </div>\r\n        </div>\r\n      );  \r\n    }\r\n}\r\n\r\nexport default FilterMenu;\r\n","import axios from 'axios';\r\n\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL + '/report';\r\n\r\nconst ReportService = {\r\n    sendReport: (report) => {\r\n        return axios.post(API_URL, {...report}).then(res => {\r\n            return res.data;\r\n        }).catch(err => {\r\n            console.log(err);\r\n            return {success: 'false', message: 'Some errors occured, try again'};\r\n        });\r\n    },\r\n    getAll : async (token) => {\r\n        try{\r\n          var response = await axios.get(API_URL + '/getAll', {headers: {token}});\r\n          return response.data;\r\n        }catch(err){\r\n          console.log(err);\r\n          return {success: false, error: \"some errors occured in client side\"};\r\n        }\r\n    }\r\n}\r\n\r\nexport default ReportService;\r\n","\r\nimport React, { Component } from \"react\";\r\nimport Input from '@material-ui/core/Input';\r\nimport socket from '../communicate/socket';\r\nimport ReportService from '../services/report';\r\n\r\nclass ReportMenu extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            username: this.props.friendInfo ? this.props.friendInfo.username : '',\r\n            description: '',\r\n            msg: null,\r\n        }\r\n        this.isMt = false;\r\n    }\r\n    componentDidMount() {\r\n      this.isMt = true;\r\n    }\r\n    componentWillUnmount(){\r\n      this.isMt = false;\r\n    }\r\n    handleUsername = (e) => {\r\n        if(this.isMt && !this.props.friendInfo) this.setState({username: e.currentTarget.value});\r\n    }\r\n    handleDescription = (e) => {\r\n      if(this.isMt) this.setState({description: e.currentTarget.value});\r\n    }\r\n    submitReport = async (e) => {\r\n        e.preventDefault();\r\n        if(this.isMt) await this.setState({msg: null});\r\n        let result = await ReportService.sendReport ({ to: this.state.username, description: this.state.description, from: this.props.myId});\r\n        console.log('report result', result);\r\n        if(result.success === true) {\r\n          socket.emit('report');\r\n          if(this.isMt) this.setState({\r\n            username: this.props.friendInfo ? this.props.friendInfo.username : '',\r\n            description: '',\r\n            msg: null,\r\n          });\r\n          await this.props.toggle();\r\n        }else{\r\n          if(this.isMt) this.setState({ msg: result.message});\r\n        }\r\n    }\r\n    render() {\r\n      return (\r\n        <div className=\"hide-overflow\" style={{overflowY: 'auto', padding: '15px', width: '250px'}}>\r\n          <div className='d-flex align-items-center justify-content-between' style={{borderBottom: '2px solid grey'}}>\r\n           <div className=\"d-flex\"><i className=\"fa fa-envelope-open-text\" style={{paddingRight: '5px', color: 'black'}}></i><h4 >Report</h4></div>\r\n           <i className=\"fas fa-times my-cursor\" onClick={this.props.toggle}></i>\r\n          </div>\r\n          <form style={{padding: '1vw'}}>\r\n            <div className=\"d-flex pt-3 form-group\">\r\n                 <Input placeholder=\"Username\" \r\n                    inputProps={{ 'aria-label': 'description' }} \r\n                    value = { this.props.friendInfo ? this.props.friendInfo.username : this.state.username}\r\n                    onChange = {this.handleUsername}\r\n                    required\r\n                />\r\n            </div>\r\n            <div className=\"pt-3 form-group\">\r\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>description: </div>\r\n                  <textarea\r\n                    row=\"20\"\r\n                    value={this.state.description}\r\n                    onChange={this.handleDescription}\r\n                    style={{ border:'none', borderBottom: \"solid 2px #eee\", width: \"100%\", backgroundColor: '#fafafa', height: '20vh'}}\r\n                    required\r\n                 />\r\n                </div>\r\n            <div className=\"form-group pt-3\">\r\n                <button className=\"btn btn-primary btn-block\" type=\"submit\" onClick={this.submitReport} style={{backgroundColor: 'slateblue', border: \"none\"}}>Report</button>\r\n            </div>\r\n            {this.state.msg && (\r\n              <div className=\"form-group\">\r\n                <div className=\"alert alert-danger\" role=\"alert\">\r\n                  {this.state.msg}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </form>\r\n        </div>\r\n      );  \r\n    }\r\n}\r\n\r\nexport default ReportMenu;\r\n","import React, { Component } from \"react\";\r\nimport FilterMenu from './filter_menu';\r\nimport ReportMenu from './report_menu.js';\r\nimport { connect } from \"react-redux\";\r\nimport { logout } from \"../actions/auth\";\r\nconst url = process.env.REACT_APP_SOCK;\r\nclass NabBar extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            filter: false,\r\n            report: false,\r\n        }\r\n        this.isMt = false;\r\n    }\r\n    componentDidMount(){\r\n        this.isMt = true;\r\n    }\r\n    logOut = async () => { \r\n        await this.props.endCall(true);\r\n        await this.props.dispatch(logout(this.props.user));\r\n        window.location.reload();    \r\n    }\r\n    skip = async() => {\r\n        if(this.isMt) await this.props.skip();\r\n    }\r\n    toggle = (value) => {\r\n        return async () => {\r\n            if(this.isMt){\r\n                await this.setState({\r\n                    [value] : !this.state[value]\r\n                 });\r\n                if(value === 'filter' && this.state.filter === true) await this.setState({report: false});\r\n                if(value === 'report' && this.state.report === true) await this.setState({filter: false});\r\n                console.log('navbar toggeld..', value, this.state);\r\n            }\r\n        };\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"navbar navbar-expand-sm bg-grey navbar-grey d-flex justify-content-between app-navbar align-items-center\">\r\n            <div>\r\n                <i className=\"fas fa-times my-cursor\"></i>\r\n            </div>\r\n            <div>\r\n                <i className=\"fa fa-sync-alt\" onClick={this.skip} style={{fontSize: \"4vh\"}}></i>\r\n            </div>\r\n            <div className=\"d-flex align-items-center\">\r\n                 <div className=\"app-dropdown\">\r\n                    <i className=\"fa fa-envelope-open-text my-cursor\" onClick = {this.toggle('report')}>Report</i>\r\n                    <div className=\"app-dropdown-content-center d-block\">\r\n                        {this.state.report  && <ReportMenu \r\n                            friendInfo = {this.props.friendInfo}\r\n                            myId = {this.props.user.user._id}\r\n                            toggle = {this.toggle('report')}\r\n                        />}\r\n                    </div>\r\n                </div>\r\n                <div className=\"app-dropdown\">\r\n                    <i className=\"fas fa-search my-cursor\" onClick = {this.toggle('filter')}>Filter</i>\r\n                    <div className=\"app-dropdown-content d-block\">\r\n                        {this.state.filter && <FilterMenu\r\n                            toggle = {this.toggle('filter')}\r\n                        />}\r\n                    </div>\r\n                </div>\r\n                <div className=\"app-dropdown\" style={{float: \"right\"}}>\r\n                    <img src={this.props.user.user.avatar?`${url}${this.props.user.user.avatar}`:`${url}/public/avatar/myavatar.jpg`} alt=\"John Doe\" className=\"rounded-circle shadow my-cursor app-user-avatar app-btn\" />\r\n                    <div className=\"app-dropdown-content\">\r\n                        <div onClick={this.props.toggleProfile} className=\"app-menu-item app-btn\">Profile</div>\r\n                        <hr style={{padding: '0px', margin: '0px', width:'100%'}} />\r\n                        <div onClick={this.logOut} className=\"app-menu-item app-btn\"><i className=\"fa fa-sign-out-alt\">Log out</i></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  const { user } = state.auth;\r\n  return {\r\n    user,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(NabBar);\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction VideoPanel({ peerSrc, localSrc, config, mediaDevice, status, endCall }) {\r\n  const peerVideo = useRef(null);\r\n  const localVideo = useRef(null);\r\n  const [video, setVideo] = useState(config.video);\r\n  const [audio, setAudio] = useState(config.audio);\r\n\r\n  useEffect(() => {\r\n    if (peerVideo.current && peerSrc) peerVideo.current.srcObject = peerSrc;\r\n    if (localVideo.current && localSrc) localVideo.current.srcObject = localSrc;\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (mediaDevice) {\r\n      mediaDevice.toggle('Video', video);\r\n      mediaDevice.toggle('Audio', audio);\r\n    }\r\n  });\r\n\r\n  /**\r\n   * Turn on/off a media device\r\n   * @param {String} deviceType - Type of the device eg: Video, Audio\r\n   */\r\n  const toggleMediaDevice = (deviceType) => {\r\n    if (deviceType === 'video') {\r\n      setVideo(!video);\r\n      mediaDevice.toggle('Video');\r\n    }\r\n    if (deviceType === 'audio') {\r\n      setAudio(!audio);\r\n      mediaDevice.toggle('Audio');\r\n    }\r\n  };\r\n\r\n  return (\r\n        <div className=\"d-flex app-video-panel\">\r\n            <div className=\"app-video-panel-wrapper\">\r\n                {peerSrc ? <video  className=\"app-video-player\" ref={peerVideo} autoPlay/>\r\n                : <img src=\"./system/screen.png\" className=\" app-video-player\" alt=\"Cinque Terre\" />}\r\n            </div>\r\n            <div className=\"fade-container app-video-panel-wrapper\" style={{alignItems: 'center'}} >\r\n                {localSrc ? <video  className=\"fade-image app-video-player\" ref={localVideo} autoPlay muted/>\r\n                : <img src=\"./system/screen.png\" className=\"fade-image app-video-player\" alt=\"Cinque Terre\" /> }\r\n                <div className=\"fade-middle d-flex\">\r\n                    <div \r\n                        className=\"fade-text my-cursor app-btn\"\r\n                        onClick={() => toggleMediaDevice('audio')} >\r\n                            audio {audio?\"on\":\"off\"}\r\n                    </div>\r\n                    <div \r\n                        className=\"fade-text my-cursor app-btn\"\r\n                        onClick={() => toggleMediaDevice('video')}>\r\n                            video {video?\"on\":\"off\"}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n  );\r\n}\r\n\r\nVideoPanel.propTypes = {\r\n  localSrc: PropTypes.object, // eslint-disable-line\r\n  peerSrc: PropTypes.object, // eslint-disable-line\r\n  config: PropTypes.shape({\r\n    audio: PropTypes.bool.isRequired,\r\n    video: PropTypes.bool.isRequired\r\n  }).isRequired,\r\n  mediaDevice: PropTypes.object, // eslint-disable-line\r\n};\r\n\r\nexport default VideoPanel;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nconst url = process.env.REACT_APP_SOCK;\r\nclass Msg extends Component {\r\n  LeftMsg = () => {\r\n    return(\r\n        <div className=\"d-flex app-msg-p\">\r\n            <img src={this.props.avatar?`${url}${this.props.avatar}`:`${url}/public/avatar/unknown.png`} alt=\"\" className=\"rounded-circle my-cursor app-msg-client-avatar\" onClick={this.props.toggle()}/>\r\n            <div className=\"app-max-width-70\">\r\n              <div className=\" shadow app-msg-left\">\r\n                {this.props.msg.text}\r\n              </div>\r\n              <p className=\"app-color-grey\">{this.props.msg.time}</p>\r\n            </div>\r\n        </div>\r\n    );\r\n  }\r\n  RightMsg = () => {\r\n    return( \r\n        <div className=\"d-flex justify-content-end app-msg-p\">\r\n        <div className=\"app-max-width-70\">\r\n          <div className=\"shadow app-msg-right\">\r\n            {this.props.msg.text}\r\n          </div>\r\n          <p className=\"app-color-grey app-textalign-right\">{this.props.msg.time}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  LeftFileMsg = () => {\r\n    return(\r\n        <div className=\"d-flex app-msg-p\">\r\n        <img src={this.props.avatar?`${url}${this.props.avatar}`:`${url}/public/avatar/unknown.png`} alt=\"\" className=\"rounded-circle my-cursor app-msg-client-avatar\" onClick={this.props.toggle()}/>\r\n        <div>\r\n          <div className=\" shadow fade-container app-msg-img-border\">\r\n            <img src={url+this.props.msg.src} alt=\"\" className=\"fade-image my-cursor app-file-upload-img\" />\r\n            <div className=\"fade-middle d-flex\">\r\n              <div className=\"fade-text my-cursor app-btn\" onClick={this.props.viewImage(url+this.props.msg.src)}>View</div>\r\n              <div className=\"fade-text my-cursor app-btn\"><a target=\"_blank\" href={url+this.props.msg.src} className=\"app-download\" download>Download</a></div>\r\n            </div>\r\n          </div>\r\n          <p className=\"app-color-grey\">{this.props.msg.time}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  RightFileMsg = () => {\r\n    return(\r\n        <div className=\"d-flex justify-content-end app-msg-p\">\r\n            <div>\r\n              <div className=\"shadow fade-container my-cursor app-msg-img-border\">\r\n                <img src={url+this.props.msg.src} alt=\"\" className=\"fade-image app-file-upload-img\" />\r\n                <div className=\"fade-middle d-flex\">\r\n                  <div className=\"fade-text my-cursor app-btn\"  onClick={this.props.viewImage(url+this.props.msg.src)}>View</div>\r\n                  <div className=\"fade-text my-cursor app-btn\"><a target=\"_blank\" href={url+this.props.msg.src} className=\"app-download\" download>Download</a></div>\r\n                </div>\r\n              </div>\r\n              <p className=\"app-color-grey app-textalign-right\">{this.props.msg.time}</p>\r\n            </div>\r\n          </div>\r\n    );\r\n  }\r\n  render() {\r\n    const {type} = this.props.msg;\r\n    // console.log(\"msg..\", this.props.msg);\r\n    if(type === 'left_msg') return this.LeftMsg();\r\n    if(type === 'right_msg') return this.RightMsg();\r\n    if(type === 'left_file_msg') return this.LeftFileMsg();\r\n    if(type === 'right_file_msg') return this.RightFileMsg();\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  const { user } = state.auth;\r\n  return {\r\n    user,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(Msg);\r\n","import React, { Component } from \"react\";\r\nimport socket from '../communicate/socket';\r\nimport UploadService from '../services/upload.service';\r\nimport 'emoji-mart/css/emoji-mart.css'\r\nimport { Picker } from 'emoji-mart'\r\n\r\nconst url = process.env.REACT_APP_SOCK;\r\n\r\nclass MsgInput extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            isTyping: false,\r\n            text: '',\r\n            file: null,\r\n            fileSrc: null,\r\n            emojiBox: 'hidden',\r\n        };\r\n        this.hiddenFileInput = React.createRef();\r\n    }\r\n    componentDidMount(){\r\n    }\r\n    onEmojiClick = (emoji, event) => {\r\n        console.log(\"Emoji\", emoji);\r\n        this.setState({\r\n            text: this.state.text + emoji.native,\r\n        });\r\n    };   \r\n    sendTyping = ()=>{\r\n        console.log('sendTyping...')\r\n\t\tthis.lastUpdateTime = Date.now();\r\n\t\tif(!this.state.isTyping){\r\n\t\t\tthis.setState({isTyping:true});\r\n\t\t\tsocket.emit('msg_typing', {to: this.props.friendId, status: true});\r\n\t\t\tthis.startCheckingTyping();\r\n\t\t}\r\n\t}\r\n\tstartCheckingTyping = ()=>{\r\n\t\tconsole.log(\"Typing\");\r\n\t\tthis.typingInterval = setInterval(()=>{\r\n\t\t\tif((Date.now() - this.lastUpdateTime) > 300){\r\n\t\t\t\tthis.setState({isTyping:false})\r\n\t\t\t\tthis.stopCheckingTyping()\r\n\t\t\t}\r\n\t\t}, 300)\r\n\t}\r\n\t\r\n\tstopCheckingTyping = ()=>{\r\n\t\tconsole.log(\"Stop Typing\");\r\n\t\tif(this.typingInterval){\r\n\t\t\tclearInterval(this.typingInterval)\r\n\t\t\tsocket.emit('msg_typing', {to: this.props.friendId, status: false});\r\n\t\t}\r\n\t}\r\n    \r\n    sendMsg = async (e) => {\r\n        e.preventDefault();\r\n        console.log(\"send button cliked...\");\r\n        const {text, file} = this.state;\r\n        const {friendId} = this.props;\r\n        if(file != null){\r\n            let fileSrc = await UploadService.uploadImage(file);\r\n            if(fileSrc){\r\n                socket.emit('new_msg', {to: friendId, msg: {\r\n                    type: 'left_file_msg',\r\n                    src: fileSrc,\r\n                }});\r\n                this.props.getMsg({\r\n                    type: 'right_file_msg',\r\n                    src: fileSrc,\r\n                });\r\n            }\r\n        }\r\n        if(text !== ''){ \r\n            socket.emit('new_msg', {to: friendId, msg: {\r\n                type: 'left_msg',\r\n                text,\r\n             }});\r\n             this.props.getMsg({\r\n                type: 'right_msg',\r\n                text,\r\n            });\r\n        }\r\n        this.setState({\r\n            text: '',\r\n            file: null,\r\n            fileSrc: null,\r\n            emojiBox: 'hidden',\r\n        });\r\n    }\r\n    handleText = event => {\r\n        this.setState({text: event.currentTarget.value});\r\n    }\r\n    handleClick = async event => {\r\n      this.hiddenFileInput.current.click();\r\n    };\r\n    handleChange = async event => {\r\n      const fileUploaded = event.target.files[0];\r\n      if(fileUploaded){\r\n          console.log(fileUploaded);\r\n          let ext = fileUploaded.name.split('.').pop().toLowerCase();\r\n          if(ext !== 'jpg' && ext !== 'png' && ext !== 'gif' && ext !== 'jpeg' && ext !== 'bmp') return;\r\n          await this.readURL(fileUploaded);\r\n          await this.setState({file: fileUploaded});\r\n      }\r\n    };\r\n    readURL = async (file) => {\r\n        if (file) {\r\n            var reader = new FileReader();\r\n    \r\n            reader.onload = async (e) => {\r\n              await this.setState({fileSrc: e.target.result});\r\n            };\r\n    \r\n            reader.readAsDataURL(file);\r\n        }\r\n    }\r\n    handleCloseFileupload = () => {\r\n        this.setState({file: null, fileSrc: null});\r\n    }\r\n    handleEmojiBox = () => {\r\n        this.setState({emojiBox: this.state.emojiBox === 'hidden'?'visible':'hidden'});\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"position-relative\">\r\n                <div className=\"app-emoji-picker\" style={{visibility: this.state.emojiBox}}>\r\n                    <Picker onSelect={this.onEmojiClick} />\r\n                </div>  \r\n                 {this.props.friendTyping && \r\n                    <div className=\"dotsContainer shadow app-typing\">\r\n                        <img src={this.props.avatar?`${url}${this.props.avatar}`:`${url}/public/avatar/unknown.png`} alt=\"\" className=\"rounded-circle my-cursor app-msg-client-avatar\"/>  \r\n                        <span id=\"dot1\"></span>\r\n                        <span id=\"dot2\"></span>\r\n                        <span id=\"dot3\"></span>\r\n                    </div>}\r\n                <form onSubmit={ this.sendMsg } className=\"chat-box-tray h-7vh position-relative\">\r\n                    {this.state.fileSrc && <div className='position-absolute app-file-upload'>\r\n                        <div className=\"position-relative\">\r\n                            <img src={this.state.fileSrc} alt='' className=\"app-file-upload-img\"/>\r\n                            <div className=\"app-topright\"><i className=\"fas fa-times my-cursor app-cross\" onClick={this.handleCloseFileupload}></i></div>\r\n                        </div>\r\n                    </div>}\r\n                    <div className=\"d-flex  app-msg-input-wrapper\">\r\n                        <i className=\"material-icons my-cursor\" style={{fontSize: \"5vh\"}} onClick={this.handleEmojiBox}>sentiment_very_satisfied</i>\r\n                        <input type=\"text\" className=\"app-msg-input\" \r\n                            placeholder=\" Type your message here... \"\r\n                            value = {this.state.text}\r\n                            onKeyUp = { e => { if(e.keyCode !== 13) this.sendTyping() } }\r\n                            onChange={this.handleText}\r\n                            style={{fontSize: \"14px\"}}\r\n                        />\r\n                    </div>\r\n                    <div >\r\n                        <i className=\"fa fa-image my-cursor \" style={{fontSize: \"5vh\"}} onClick={this.handleClick}></i>\r\n                        <input type=\"file\"\r\n                            ref={this.hiddenFileInput}\r\n                            onChange={this.handleChange}\r\n                            style={{display:'none'}} \r\n                        /> \r\n                    </div>\r\n                    <div >\r\n                        <i className=\"fa fa-paper-plane my-cursor\" style={{fontSize: \"5vh\"}}\r\n                            onClick={this.sendMsg}\r\n                        ></i>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        );\r\n  }\r\n}\r\n\r\nexport default MsgInput;\r\n","import React, { Component } from \"react\";\r\nimport Msg from './msg';\r\nimport socket from '../communicate/socket';\r\nimport MsgInput from './msg_input';\r\n\r\nclass MsgBox extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            chats:[],\r\n            friendTyping: false,\r\n        };\r\n        this.mtFlag = false;\r\n    }\r\n    componentDidMount(){\r\n        this.mtFlag = true;\r\n        this.scrollDown();\r\n        if(this.props.friendId){\r\n            this.resetChat();\r\n        }\r\n    }\r\n    componentWillUnmount(){\r\n        this.mtFlag = false;\r\n    }\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tthis.scrollDown();\r\n    }\r\n    scrollDown = () => {\r\n\t\tconst { container } = this.refs\r\n\t\tcontainer.scrollTop = container.scrollHeight\r\n\t}\r\n    resetChat = () => {\r\n        const { chats } = this.state;\r\n\t\tsocket.on('msg_typing', async (data) =>{\r\n            if(data.from === this.props.friendId){\r\n                if(this.mtFlag) this.setState({friendTyping: data.status});\r\n            }\r\n        });\r\n\t\tsocket.on('new_msg', (data) => {\r\n            if(data.from === this.props.friendId){\r\n                data.msg.time = this.getTime(new Date(Date.now()));\r\n                if(this.mtFlag) this.setState({chats: [...this.state.chats, data.msg]});\r\n                console.log('after receive msg', chats);\r\n            }\r\n        })\r\n    }\r\n    \r\n    getTime = (date)=>{\r\n        return `${date.getHours()}:${(\"0\"+date.getMinutes()).slice(-2)}`\r\n    }\r\n    \r\n    renderMsg = () => {\r\n        return this.state.chats.map((msg, id) =>{\r\n            return (<Msg\r\n                key={id}\r\n                msg = {msg}\r\n                toggle={this.props.toggle}\r\n                viewImage = {this.props.viewImage}\r\n                avatar={this.props.avatar}\r\n                />);\r\n            })\r\n    };\r\n    getMsg = (msg) => {\r\n        if(this.mtFlag) this.setState({\r\n            chats: [...this.state.chats, {...msg, time: this.getTime(new Date(Date.now()))}]\r\n        });\r\n    }\r\n    render() {\r\n        return (\r\n        <div className=\"d-flex flex-fill flex-column\">\r\n            <div ref='container' className=\"hide-overflow app-msg-box\">\r\n                 {this.renderMsg()}             \r\n            </div>\r\n            <MsgInput\r\n                getMsg={this.getMsg}\r\n                friendId={this.props.friendId}\r\n                avatar={this.props.avatar}\r\n                friendTyping={this.state.friendTyping}\r\n            />\r\n        </div>\r\n        );\r\n  }\r\n}\r\n\r\nexport default MsgBox;\r\n","import React, { Component } from \"react\";\r\n\r\nconst url = process.env.REACT_APP_SOCK;\r\n\r\nclass ClientProfile extends Component {\r\n\r\n  render() {\r\n    console.log(\"toggle\", this.props.toggle);\r\n    const {info} = this.props;\r\n    return (\r\n      <div className=\"app-client-profile-background\" style={{ backgroundImage: `url(${info.avatar?`${url}${info.avatar}`:`${url}/public/avatar/unknown.png`})`}}>\r\n        <div className=\"d-flex flex-column align-items-center app-client-profile\">\r\n          <div className=\"app-cross-div\"><i className=\"fas fa-times my-cursor app-cross\" onClick={this.props.toggle()}></i></div>\r\n          <img src={info.avatar?`${url}${info.avatar}`:`${url}/public/avatar/unknown.png`} className=\"rounded-circle app-client-avatar\" alt=\"Cinque Terre\" />\r\n          <h5 className=\"app-client-name\">{info.username}</h5>\r\n          <p><i className=\"fa fa-map-marker-alt\" style={{color: '#eee'}}/>{info.location}</p>\r\n          <div className=\"app-profile-desc\">\r\n            <p>Gender: {info.gender}</p>\r\n            <p>Age: {info.age}</p>\r\n            <p>About Me:</p>\r\n            <p> {info.aboutMe}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ClientProfile;\r\n","import React, { Component } from \"react\";\r\n\r\nclass ViewImg extends Component {\r\n  render() {\r\n      console.log(\"viewImage\", this.props.src);\r\n    return (\r\n        <div className=\"image-modal\">\r\n            <span className=\"close\" onClick={this.props.toggle('')}>&times;</span>\r\n            <img src={this.props.src} className=\"modal-content\" alt=\"\"/>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default ViewImg;\r\n","import React, { Component } from \"react\";\r\n\r\nclass Loading extends Component {\r\n\r\n  render() {\r\n    return ( \r\n        <div className=\"app-loading\">\r\n            <div className=\"dotsContainer\" >\r\n              <h1>Finding</h1>\r\n              <span id=\"dot1\"></span>\r\n              <span id=\"dot2\"></span>\r\n              <span id=\"dot3\"></span>\r\n            </div>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Loading;\r\n","import React, { Component } from \"react\";\nimport Form from \"react-validation/build/form\";\nimport CheckButton from \"react-validation/build/button\";\nimport UploadService from '../services/upload.service';\nimport countryList from 'react-select-country-list';\nimport { connect } from \"react-redux\";\nimport {  update } from \"../actions/auth\";\nconst url = process.env.REACT_APP_SOCK;\n\nclass Profile extends Component {\n  constructor(props) {\n    super(props);\n    const {user} = this.props.user;\n    this.state = {\n      username: user.username,\n      password: user.password,\n      age: user.age,\n      gender: user.gender,\n      location: user.location,\n      aboutMe: user.aboutMe,\n      file: null,\n      avatarSrc: null,\n      successful: false,\n    };\n    this.hiddenFileInput = React.createRef();\n    this.locationOptions = countryList().getData().map((item, idx) => {\n      return <option key={idx}>{item.label}</option>;\n    });\n  }\n\n  onChangeUsername = (e) => {\n    this.setState({\n      username: e.target.value,\n    });\n  }\n  onChangeAge = (e) => {\n    this.setState({\n      age: e.target.value,\n    });\n  }\n  onChangeGender = (e) => {\n    this.setState({\n      gender: e.target.value,\n    });\n  }\n  onChangeLocation = (e) => {\n    this.setState({\n      location: e.target.value,\n    });\n  }\n  onChangeAboutMe = (e) => {\n    this.setState({\n      aboutMe: e.target.value,\n    });\n  }\n  onChangePassword = (e) => {\n    this.setState({\n      password: e.target.value,\n    });\n  }\n\n  handleUpdate = async (e) => {\n    e.preventDefault();\n\n    this.setState({\n      successful: false,\n    });\n\n    this.form.validateAll();\n    const {file, username, age, gender, location, password, aboutMe} = this.state;\n    let avatar;\n    if (this.checkBtn.context._errors.length === 0) {\n      if(file){avatar = await UploadService.uploadAvatar(file);}\n      var user = await this.props.dispatch( update( { username, age, gender, location, password, aboutMe, avatar }, this.props.user.token) );\n      if(user.success === true) {this.props.toggleProfile();}\n      else { this.setState({loading: false});}\n    }else {this.setState({loading: false,});}\n  }\n  handleClick = async event => {\n    await this.hiddenFileInput.current.click();\n  };\n  handleChange = async event => {\n    const fileUploaded = event.target.files[0];\n    if(fileUploaded){\n        console.log(fileUploaded);\n        await this.readURL(fileUploaded);\n        await this.setState({file: fileUploaded});\n    }\n  }\n  readURL = async (file) => {\n    if (file) {\n        var reader = new FileReader();\n\n        reader.onload = async (e) => {\n          await this.setState({avatarSrc: e.target.result});\n        };\n\n        reader.readAsDataURL(file);\n    }\n  }\n  render() {\n    const { message } = this.props;\n    const {file, avatarSrc} = this.state;\n    return (\n      <div className=\"col-md-12\">\n        <div className=\"card card-container shadow-lg\" style={{backgroundColor:\"white\"}}>\n        <i className=\"fa fa-arrow-left app-back-icon\" onClick={this.props.toggleProfile}></i>\n          <input type=\"file\"\n                ref={this.hiddenFileInput}\n                onChange={this.handleChange}\n                style={{display:'none'}} \n          /> \n          \n          <img\n            src={file ? avatarSrc : (this.props.user.user.avatar?`${url}${this.props.user.user.avatar}`:`${url}/public/avatar/myavatar.jpg`)}\n            alt=\"profile-img\"\n            className=\"profile-img-card\"\n            onClick={this.handleClick}\n          />\n\n          <Form\n            onSubmit={this.handleUpdate}\n            ref={(c) => {\n              this.form = c;\n            }}\n          >\n            {!this.state.successful && (\n              <div>\n                <div className=\"d-flex pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Username: </div>\n                  <input\n                    type=\"text\"\n                    name=\"username\"\n                    className=\"app-info-input\"\n                    value={this.state.username}\n                    onChange={this.onChangeUsername}\n                    style={{ border:'none', borderBottom: \"solid 2px #eee\"}}\n                    required\n                  />\n                </div>\n                <div className=\"d-flex pt-3 justify-content-between form-group\">\n                  <div className=\"d-flex form-group\">\n                    <div style={{color: '#ccc', paddingRight: '6px'}}>gender: </div>\n                    <select \n                      style={{ border:'none', borderBottom: \"solid 2px #eee\"}}\n                      value={this.state.gender}\n                      onChange={this.onChangeGender}\n                      required\n                    >\n                      <option>Male</option>\n                      <option>Female</option>\n                      <option>orther</option>\n                    </select>\n                    </div>\n                  <div className=\"d-flex form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Age: </div>\n                  <input\n                        type=\"number\"\n                        name=\"username\"\n                        value={this.state.age}\n                        onChange={this.onChangeAge}\n                        style={{ border:'none', borderBottom: \"solid 2px #eee\", width: \"50px\"}}\n                        min='3'\n                        max='150'\n                        required\n                  />\n                  </div>\n                </div>\n                <div className=\"d-flex pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Location: </div>\n                  <select \n                      style={{ border:'none', borderBottom: \"solid 2px #eee\", maxWidth: \"178px\"}}\n                      value={this.state.location}\n                      onChange={this.onChangeLocation}\n                      required\n                    >\n                      {\n                        this.locationOptions\n                      }\n                    </select>\n                </div>\n                <div className=\"d-flex pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>Password: </div>\n                  <input\n                    type=\"password\"\n                    name=\"password\"\n                    className=\"app-info-input\"\n                    value={this.state.password}\n                    onChange={this.onChangePassword}\n                    style={{ border:'none', borderBottom: \"solid 2px #eee\"}}\n                  />\n                </div>\n                <div className=\"pt-3 form-group\">\n                  <div style={{color: '#ccc', paddingRight: '6px'}}>About me: </div>\n                  <textarea\n                    row=\"3\"\n                    value={this.state.aboutMe}\n                    onChange={this.onChangeAboutMe}\n                    // validations={[required, vpassword]}\n                    style={{ border:'none', borderBottom: \"solid 2px #eee\", width: \"100%\"}}\n                  />\n                </div>\n                <div className=\"form-group pt-3\">\n                  <button className=\"btn btn-primary btn-block\" style={{backgroundColor: 'slateblue', border: \"none\"}}>Update</button>\n                </div>\n              </div>\n            )}\n\n            {message && (\n              <div className=\"form-group\">\n                <div className={ this.state.successful ? \"alert alert-success\" : \"alert alert-danger\" } role=\"alert\">\n                  {message}\n                </div>\n              </div>\n            )}\n            <CheckButton\n              style={{ display: \"none\" }}\n              ref={(c) => {\n                this.checkBtn = c;\n              }}\n            />\n          </Form>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  const { user } = state.auth;\n  const { message } = state.message;\n  return {\n    message,\n    user\n  };\n}\n\nexport default connect(mapStateToProps)(Profile);\n","import React, { Component } from 'react';\nimport _ from 'lodash';\nimport socket from '../communicate/socket';\nimport PeerConnection from '../communicate/PeerConnection';\nimport NabBar from './main_navbar';\nimport VideoPanel from './video_panel';\nimport MsgBox from './msg_box';\nimport ClientProfile from './clietn_profile';\nimport ViewImg from './view_img';\nimport Loading from './loading';\nimport { connect } from \"react-redux\";\nimport AuthService from '../services/auth.service';\nimport Profile from \"./profile\";\nclass Main extends Component {\n  constructor(props) {\n    super(props);\n    console.log(this.props.user);\n    this.state = {\n      clientId: '',\n      localSrc: null,\n      peerSrc: null,\n      clientProfileFlag: false,\n      friendId: '',\n      viewImg: '',\n      friendInfo: null,\n      profile: false,\n    };\n    this.pc = {};\n    this.config = null;\n  }\n  componentDidMount() {\n    console.log(\"Main component mounted, current User: \", this.props.user);\n    document.title = this.props.user.user.username;\n    socket\n      .on('init', async ({ id: clientId }) => {\n        console.log('client id..', clientId);\n        this.endCall(false);\n        socket.emit('finding');\n      })\n      .on('request', async ({ from: friendId }) => {\n        console.log('call request from...', friendId);\n\n        this.getFriend(friendId);\n        await this.setState({friendId});\n        await this.startCall(false, friendId, { audio: true, video: true });\n      })\n      .on('call', async (data) => {\n        try{\n          if(data.sdp) {\n            await this.pc.setRemoteDescription(data.sdp);\n            if (data.sdp.type === 'offer') await this.pc.createAnswer();\n          } else await this.pc.addIceCandidate(data.candidate);\n        }catch(err){\n          console.log(\"!!!Error::\", err);\n          await this.endCall(true);\n          socket.emit('finding');\n        }\n      })\n      .on('finding', async (friendId) => {\n        console.log('finding from server ', friendId);\n        if(friendId === 'null'){\n          setTimeout(()=>socket.emit('finding'), 1500);\n        }else{\n          this.getFriend(friendId);\n          await this.setState({friendId: friendId});\n          await this.startCall(true, friendId, { audio: true, video: true });\n        }\n      })\n      .on('end', async (friendId) => {\n        console.log('call end message from...');\n        if(this.state.friendId === friendId || friendId === \"fromServerSocket\"){\n           await this.endCall(false);\n           socket.emit('finding');\n        }\n      })\n      .on('reset', async () => {\n        await this.endCall(true);\n        socket.emit('init', this.props.user.user._id);\n      })\n      .emit('init', this.props.user.user._id);\n\n  }\n  componentWillUnmount(){\n    this.endCall(true);\n    socket.disconnect();\n    console.log(\"main component will unmount now...\", this.pc);\n  }\n  getFriend = async (friendId) => {\n    let response = await AuthService.getFriendInfo(friendId, this.props.user.token);\n    console.log(\"Get friend info from server\", response);\n    if(response.success === true){\n      this.setState({\n        friendInfo: response.user\n      });\n    }else{\n      console.log('Getting friend info from server failed');\n      this.setState({\n        friendInfo: null\n      });\n      this.endCall(true);\n    }\n  }\n  skip = async () => {\n    console.log(\"skip..current friendId\", this.state.friend);\n    await this.endCall(true);\n    socket.emit('finding');\n  }\n  startCall = async (isCaller, friendID, config) => {\n    console.log('start call...', isCaller, friendID, config);\n\n    this.config = config;\n    this.pc = new PeerConnection(friendID)\n      .on('localStream', async (src) => {\n        const newState = { localSrc: src };\n        await this.setState(newState);\n      })\n      .on('peerStream', async (src) => await this.setState({ peerSrc: src }))\n      .start(isCaller, config);\n  }\n\n  endCall = async (isStarter) => {\n    console.log('end call to...', this.state.friendId, isStarter);\n    if (_.isFunction(this.pc.stop)) {\n      await this.pc.stop(isStarter);\n    }\n    this.pc = {};\n    this.config = null;\n    await this.setState({\n      localSrc: null,\n      peerSrc: null,\n      clientProfileFlag: false,\n      friendId: '',\n      viewImg: '',\n      friendInfo: null,\n    });\n  }\n  toggleFriendFlag = (value) => {\n    return async () => {\n      await this.setState({clientProfileFlag: !this.state.clientProfileFlag});\n    };\n  }\n  viewImage = (src) => {\n    return async () => {\n      await this.setState({viewImg: src});\n    };\n  }\n  toggleProfile = async () => {\n    await this.setState({\n      profile: !this.state.profile\n    });\n    if(!this.state.profile) socket.emit('finding');\n    else this.endCall(true);\n  }\n  render() {\n    const { viewImg, localSrc, peerSrc, clientProfileFlag, friendId } = this.state;\n    return (\n      <div> {!this.state.profile && (\n  <div className=\"container-fluid shadow-lg app-main-div\">\n    <NabBar \n      history={this.props.history}\n      skip = {this.skip}\n      endCall={this.endCall}\n      toggleProfile = {this.toggleProfile}\n      friendInfo = {this.state.friendInfo}\n    />\n    <div className=\"d-flex app-board\">\n      {_.isEmpty(this.config) && !friendId &&\n        (<Loading />)\n      }\n      {!_.isEmpty(this.config) && friendId && (\n            <VideoPanel\n              localSrc={localSrc}\n              peerSrc={peerSrc}\n              config={this.config}\n              mediaDevice={this.pc.mediaDevice}\n            />\n          ) }\n        {!_.isEmpty(this.config) && friendId &&  \n          <MsgBox \n              toggle={this.toggleFriendFlag}\n              viewImage={this.viewImage}\n              friendId={this.state.friendId}\n              avatar={this.state.friendInfo.avatar}\n          />}\n        {!_.isEmpty(this.config) && friendId && clientProfileFlag && \n          <ClientProfile \n              clientInfo = {this.state.friendInfo}\n              toggle={this.toggleFriendFlag}\n              info={this.state.friendInfo}\n          />}\n     </div>\n        {(viewImg !== '') && <ViewImg\n            src={viewImg}\n            toggle={this.viewImage}\n        />}\n  </div>)}\n  {this.state.profile && <Profile toggleProfile={this.toggleProfile}/>}\n  </div>\n\n    );\n  }\n}\n\n\nfunction mapStateToProps(state) {\n  const { user } = state.auth;\n  const { isLoggedIn } = state.auth;\n  return {\n    user,\n    isLoggedIn,\n  };\n}\n\nexport default connect(mapStateToProps)(Main);\n","import axios from 'axios';\r\n\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL + '/ban';\r\n\r\nconst BanService = {\r\n    create: (ip, token) => {\r\n        return axios.post(API_URL, {ip}, {headers: {token}}).then(res => {\r\n            return res.data;\r\n        }).catch(err => {\r\n            console.log(err);\r\n            return {success: 'false', message: 'Some errors occured, try again'};\r\n        });\r\n    },\r\n    delete: (id, token) => {\r\n        return axios.delete(API_URL, {id}, {headers: {token}}).then(res => {\r\n            return res.data;\r\n        }).catch(err => {\r\n            console.log(err);\r\n            return {success: 'false', message: 'Some errors occured, try again'};\r\n        });\r\n    },\r\n    createAccount: (id, token) => {\r\n        return axios.post(API_URL+`/account/${id}`, {}, {headers: {token}}).then(res => {\r\n            return res.data;\r\n        }).catch(err => {\r\n            console.log(err);\r\n            return {success: 'false', message: 'Some errors occured, try again'};\r\n        });\r\n    },\r\n    deleteAccount: (id, token) => {\r\n        return axios.delete(API_URL + `/account/${id}`, {}, {headers: {token}}).then(res => {\r\n            return res.data;\r\n        }).catch(err => {\r\n            console.log(err);\r\n            return {success: 'false', message: 'Some errors occured, try again'};\r\n        });\r\n    },\r\n    getAll: (token) => {\r\n        return axios.get(API_URL+'/getAll', {}, {headers: {token}}).then(res => {\r\n            return res.data;\r\n        }).catch(err => {\r\n            console.log(err);\r\n            return {success: 'false', message: 'Some errors occured, try again'};\r\n        });\r\n    },\r\n}\r\n\r\nexport default BanService;\r\n","import React from 'react';\r\nimport socket from '../communicate/socket';\r\nimport banService from '../services/ban';\r\nimport reportService from '../services/report';\r\nimport authService from '../services/auth.service';\r\nimport { DataGrid } from '@material-ui/data-grid';\r\n\r\nconst columns = [\r\n  { field: 'username', headerName: 'Name' },\r\n  { field: 'ip', headerName: 'IP' },\r\n  { field: 'location', headerName: 'Location',  },\r\n  {\r\n    field: 'age',\r\n    headerName: 'Age',\r\n    type: 'number',\r\n    \r\n  },\r\n  { field: 'gender', headerName: 'Gender', },\r\n  { field: 'status', headerName: 'Status',},\r\n];\r\n\r\nexport default class UserTab extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n    }\r\n    render(){\r\n        return (\r\n          <div style={{ height: 400, width: '100%' }}>\r\n            <DataGrid rows={this.props.rows} columns={columns} pageSize={5} checkboxSelection />\r\n          </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport socket from '../communicate/socket';\r\nimport banService from '../services/ban';\r\nimport reportService from '../services/report';\r\nimport authService from '../services/auth.service';\r\nimport UserTab from './user_tab';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\n\r\n\r\nexport default class AdminBoard extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            users: [],\r\n            value: 0,\r\n        }\r\n    }\r\n  \r\n    componentDidMount(){\r\n      this.init();\r\n        socket.emit('admin_getUsers');\r\n        socket.on('admin_getUsers', async (data) => {\r\n          console.log(\"...data from server,,\", data);\r\n        })\r\n    }\r\n    init = async () => {\r\n      let res = await authService.getAll(\"Password1qaz=]'/ThisisAdmin\");\r\n      if(res.success === true){\r\n        await this.setState({\r\n          users: res.users.map((user, idx)=> {\r\n            return {\r\n            id: idx,\r\n            username: user.username,\r\n            ip: 'undefined',\r\n            location: user.location,\r\n            age: user.age,\r\n            gender: user.gender,\r\n            status: user.status};\r\n          })\r\n        });\r\n      }\r\n      res = await banService.getAll(\"Password1qaz=]'/ThisisAdmin\");\r\n      if(res.success === true){\r\n        this.bans = res.bans;\r\n      }\r\n      res = await reportService.getAll(\"Password1qaz=]'/ThisisAdmin\");\r\n      if(res.success === true){\r\n        this.reports = res.reports;\r\n      }\r\n      console.log(\"admin states...\", this.state);\r\n    }\r\n    handleChange = (event, newValue) => {\r\n      this.setState({\r\n        value: newValue\r\n      });\r\n    };\r\n    render(){\r\n      const {value} = this.state;\r\n        return (\r\n              <div>\r\n                  <AppBar position=\"static\">\r\n                    <Tabs\r\n                      variant=\"fullWidth\"\r\n                      value={value}\r\n                      onChange={this.handleChange}\r\n                      aria-label=\"nav tabs example\"\r\n                    >\r\n                      <LinkTab label=\"Page One\"  {...a11yProps(0)} />\r\n                      <LinkTab label=\"Page Two\"  {...a11yProps(1)} />\r\n                      <LinkTab label=\"Page Three\"  {...a11yProps(2)} />\r\n                    </Tabs>\r\n                  </AppBar>\r\n                  <TabPanel value={value} index={0}>\r\n                    <UserTab \r\n                      rows = {this.state.users}\r\n                    />\r\n                  </TabPanel>\r\n                  <TabPanel value={value} index={1}>\r\n                    Page Two\r\n                  </TabPanel>\r\n                  <TabPanel value={value} index={2}>\r\n                    Page Three\r\n                  </TabPanel>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`nav-tabpanel-${index}`}\r\n      aria-labelledby={`nav-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3}>\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `nav-tab-${index}`,\r\n    'aria-controls': `nav-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nfunction LinkTab(props) {\r\n  return (\r\n    <Tab\r\n      component=\"a\"\r\n      onClick={(event) => {\r\n        event.preventDefault();\r\n      }}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n}));\r\n","import React, { Component } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass ProtectedRoute extends Component{\r\n    render(){\r\n        if(this.props.user && this.props.isLoggedIn){\r\n            return <Route {...this.props} />;\r\n        }else{\r\n            return <Redirect to='/login' />;\r\n        }\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const { user, isLoggedIn } = state.auth;\r\n    return {\r\n      user,\r\n      isLoggedIn\r\n    };\r\n  }\r\n  export default connect(mapStateToProps)(ProtectedRoute);\r\n  ","import { createBrowserHistory } from \"history\";\n\nexport const history = createBrowserHistory();\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Router, Switch, Route, Redirect } from \"react-router-dom\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./App.css\";\n\nimport Login from \"./components/login\";\nimport Register from \"./components/register\";\nimport Main from \"./components/main\";\nimport AdminBoard from './components/admin';\nimport ProtectedRoute from './protected_route';\nimport { logout } from \"./actions/auth\";\nimport { clearMessage } from \"./actions/message\";\nimport { history } from './helpers/history';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentUser: undefined,\n    };\n\n    history.listen((location) => {\n      props.dispatch(clearMessage()); // clear message when changing location\n    });\n  }\n\n  componentDidMount() {\n    const user = this.props.user;\n    if (user) {\n      this.setState({\n        currentUser: user,\n      });\n    }\n  }\n\n  logOut = () => {\n    this.props.dispatch(logout(this.props.user));\n  }\n\n  render() {\n    console.log(\"env testing...\", process.env );\n    return (\n      <Router history={history}>\n        <div>\n          <Switch>\n            <Route exact path={\"/\"} ><Redirect to=\"/login\" /></Route>\n            <Route exact path=\"/login\" component={Login} />\n            <Route exact path=\"/register\" component={Register} />\n            <ProtectedRoute exact path=\"/main\" component={Main} />\n            <Route exact path=\"/admin\" component={AdminBoard} />\n          </Switch>\n        </div>\n      </Router>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  const { user } = state.auth;\n  return {\n    user,\n  };\n}\nexport default connect(mapStateToProps)(App);\n","import { SET_MESSAGE, CLEAR_MESSAGE } from \"./types\";\n\nexport const setMessage = (message) => ({\n  type: SET_MESSAGE,\n  payload: message,\n});\n\nexport const clearMessage = () => ({\n  type: CLEAR_MESSAGE,\n});\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can chađinge\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}